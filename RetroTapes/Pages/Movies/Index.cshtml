@page
@model RetroTapes.Pages.Movies.IndexModel
@{
ViewData["Title"] = "Movies";
}

<section>

<h1>Movies</h1>

<div class="mb-3 d-flex align-items-center gap-2">

    @await Html.PartialAsync("_SortAndFilter", Model.Filter)

    <a asp-page="./Create" class="btn btn-sm btn-primary ms-auto">New Movie</a>

</div>

<table class="table table-striped">
  <thead>
    <tr>
      <th>Title</th>
      <th>Rental Rate</th>
      <th>Length</th>
      <th>Language</th>

      <th></th>

    </tr>
  </thead>
  <tbody>
    @foreach (var item in Model.Films)
    {
    <tr>
      <td>@item.Title</td>
      <td>@item.RentalRate</td>
      <td>@item.Length</td>
      <td>@item.Language.Name</td>
      <td>
        <a asp-page="./Edit" asp-route-id="@item.FilmId" class="btn btn-sm btn-outline-primary">Edit</a>
        <a asp-page="./Details" asp-route-id="@item.FilmId" class="btn btn-sm btn-outline-secondary">View</a>
        <a asp-page="./Delete" asp-route-id="@item.FilmId" class="btn btn-sm btn-outline-danger">Delete</a>
        <a asp-page="/Rentals/Create" class="btn btn-sm btn-primary" style="margin-left:50px">Rent</a>

      </td>
    </tr>
    }
  </tbody>
</table>

<div class="d-flex justify-content-between">
  @if (Model.HasPreviousPage)
  {
  <a asp-page="./Index" asp-route-pageIndex="@(Model.PageIndex - 1)" asp-route-searchTerm="@Model.Filter.SearchTerm"
    asp-route-sortBy="@Model.Filter.SortBy" asp-route-orderBy="@Model.Filter.OrderBy" class="btn btn-secondary">«
    Previous</a>
  }
  else
  {
  <a class="btn btn-secondary disabled">« Previous</a>
  }
  <span>Side @Model.PageIndex of @Model.TotalPages</span>
  @if (Model.HasNextPage)
  {
  <a asp-page="./Index" asp-route-pageIndex="@(Model.PageIndex + 1)" asp-route-searchTerm="@Model.Filter.SearchTerm"
    asp-route-sortBy="@Model.Filter.SortBy" asp-route-orderBy="@Model.Filter.OrderBy" class="btn btn-secondary">Next
    »</a>
  }
  else
  {
  <a class="btn btn-secondary disabled">Next »</a>
  }
</div>

</section>